---
title: 记一次博客改动
date: 2018-08-25 19:31:01
updated: 2018-08-25 19:31:01
permalink: ji08-25
categories: Diary
tags: 
    - Github
    - Coding
---
{% blockquote %}
今天搞博客搞了一个下午，遇到各种问题，痛并快乐着。。。
{% endblockquote %}
<!--more-->
# 领养小姐姐
上午的时候领养了一个小姐姐，刚开始看人家的README一脸懵逼。好吧其实方法并不难，只是作者给了配置太多的信息，其实有部分可以放在Wiki里面。
Github地址：https://github.com/YuanLiChenAi/hexo-helper-live2d
## 安装
### Hexo
安装模块：
```
npm install --save hexo-helper-live2d
```
## 配置
在Hexo的 _config.yml 文件或主题的 _config.yml 文件中添加配置都可以，我这里添加在HEXO下的 _config.yml文件中.
示例配置:
```m
live2d:
  enable: true
  scriptFrom: local
  pluginRootPath: live2dw/
  pluginJsPath: lib/
  pluginModelPath: assets/
  tagMode: false
  debug: false
  model:
    use: ./source/live2d_models/live2d-widget-model-koharu #模型位置及名称
  display:
    position: right
    width: 120
    height: 240
  mobile:
    show: true

```
## 模型
我用的是koharu小姐姐，使用`npm install 模型的包名`来安装,然后将包名输入位于 _config.yml 的 model.use 中.
下载模型：
```
npm install live2d-widget-model-koharu
```
别的模型：
```
live2d-widget-model-chitose
live2d-widget-model-epsilon2_1
live2d-widget-model-gf
live2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)
live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)
live2d-widget-model-haruto
live2d-widget-model-hibiki
live2d-widget-model-hijiki
live2d-widget-model-izumi
live2d-widget-model-koharu
live2d-widget-model-miku
live2d-widget-model-ni-j
live2d-widget-model-nico
live2d-widget-model-nietzsche
live2d-widget-model-nipsilon
live2d-widget-model-nito
live2d-widget-model-shizuku
live2d-widget-model-tororo
live2d-widget-model-tsumiki
live2d-widget-model-unitychan
live2d-widget-model-wanko
live2d-widget-model-z16
```
实物参考：https://huaji8.top/post/live2d-plugin-2.0/
<br>
# 独立的CTFwp
一直觉得自己blog全是wp，不如直接建一个专用的ctfwp blog，于是下午就新建了一个ctf仓库，把所有wp文章都迁移出去。看了很多作者的主题，不是太复杂就是太简单，不符合我的需求，而且下过来也要改改风格，嫌麻烦就直接用现在的主题。除了字体等风格上的直接拷贝过来，评论系统、大部分page页等就复制了，以简单为主，当然小姐姐就不在这个库领养了。
<br>
在github创建ctf库时，库名是：`ctf.github.io`，page链接是`yuanlichenai.top/ctf.github.io`(yuanlichenai.top是我github的自定义域名)，一脸懵逼，然后我在阿里上添加了解析：`ctf.yuanlichenai.top`--指向-->`yuanlichenai.top`,总觉得哪里不对呀。访问的时候没什么问题，但是在把站点升级为https的时候，颁发证书除了问题，不给我发证书，后来才知道原因是dns设置的问题。在排查问题时，我修改了库名为：`ctf`，page链接变成了`yuanlichenai.top/ctf`，想到某种可能，我把两个库的自定义域名都关闭了，此时旧库page页变成了`yuanlichenai.github.io`,ctf库变成了`yuanlichena.github.io/ctf`.似乎是找到了原因，我又修改了旧库的名字为：`yuanlichenai`，此时page页变成了`yuanlichenai.github.io/yuanlichenai`,瞬间恍然大悟。因为之前是看教程做的blog，所以有些地方是知其然而不知其所以然。
<br>
原因如下：
教程要求创建的库名是：`github用户名.github.io`,正常page链接应该是：`github用户名.github.io/github用户名.github.io`,因为一样就直接去重了，导致在ctf库里的page变成了`yuanlichenai.top/ctf.github.io`，解析记录只能写主机头+域名，`/`后面的东西是加不了的，github因为没有查到解析记录指向自己家的服务器，所以不能给我颁发证书。事实上不管什么源域名只要解析记录只要指向`github用户名.github.io`就可以了，github的服务器会通过源域名查询自己数据库记录的用户自定义域名来指向对应的githubku。顺带提一下当初教程说的解析是解析到github的ip地址，这样的方法肯定不如CNAME记录来的灵活，而且还是在阿里买的域名，然后去DNSPOD做解析。看了下这个DNSPOD好像和腾讯云有关系。。（看来作者的网络基础不过关啊。。）
<br>
# 酷炫的导航页
看了网友[ourfor](https://ourfor.top/)的blog，受到启发，既然都分成两个blog了不如直接弄一个导航页。原以为是什么高级的功能，原来是静态页，只不过修改了index索引文件，ourfor是在每次`hexo g`以后把public里的index.html重命名为home.html，同时再把index.html和welcome.html以及相关的样式文件在放进来，这样有点麻烦。于是我直接再创建一个导航库，将导航页放进去，样式文件在文件夹里，只能git上去，但是用git太麻烦，还需要配置一些东西。于是想到`hexo d`。先把`hexo g`生成的public文件夹里的东西删除，把导航页丢进去；再把_config.yml配置文件里的远程仓库地址改为导航库的git地址。一招偷梁换柱，完美✌。
<br>
# 小结
`hexo clean`后可以直接`hexo d`，会自动帮你`hexo g`，但是没有clean就不行
自定义域名需要在DNS服务商配置的内容：
coding:`你自己的域名`--指向-->`coding用户名.coding.me`
github:`你自己的域名`--指向-->`github用户名.github.io`
<br>
现在的博客情况：
coding(为主)：
导航页：https://yuanlichenai.cn
博客：https://blog.yuanlichenai.cn
WP:https://ctf.yuanlichenai.cn
<br>
github：
导航页：https://yuanlichenai.top
博客：https://blog.yuanlichenai.top
WP:https://ctf.yuanlichenai.top
<br>
<br>